# The basics {#basics}

```{r include=FALSE}
# Every file must contain at least one R chunk due to the linting process.
```

**TO BE COMPLETED**

## R family

A few of the common R relations are

- R is the programming language, born in 1997, based on S, [honest](https://en.wikipedia.org/wiki/R_(programming_language)).
- RStudio is a useful integrated development environment (IDE) that makes it cleaner to write, run and organise R code.
- Rproj is the file extension for an R project, essentially a working directory marker, shortens file paths, keep everything relevant to your project together and easy to reference.
- packages are collections of functions written to make specific tasks easier, eg the `stringr` package contains functions to work with strings. Packages are often referred to as libraries in other programing languages.
- .R is the file extension for a basic R script in which anything not commented out with `#` is code that is run.
- .Rmd is the file extension for Rmarkdown an R package useful for producing reports. A .Rmd script is different to a .R script in that the default is text rather than code. Code is placed in code chunks - similar to how a Jupyter Notebook looks.

## DfT R/RStudio - subject to change

Which version of R/RStudio should I use at DfT? A good question. Currently the 'best' verion of R we have available on network is linked to RStudio version 11543. This can be accessed via the Citrix app on the Windows 10 devices, or via Citrix desktop. The local version of RStudio on the Windows 10 devices is currently unusable (user testing is ongoing to change this).


## RStudio IDE

Whistle stop tour of R favourite IDE - with pics!

## Projects

Why you should work in an R project, how to set up and project happiness. See this section of [Beginner R Featuring Pokemon](https://matt-dray.github.io/beginner-r-feat-pkmn/#3_project_working) by Matt Dray.

### folders

data, output, images

### sessionInfo()

Include a saved file of the sessionInfo() output, this command prints out the versions of all the packages currently loaded. This information is essential when passing on code as packages can be updated and code breaking changes made.


## R memory

R works in RAM, so its memory is only as good as the amount of RAM you have 


## Assignement operators `<-` vs `=`

To assign or to equal? These are not always the same thing. In R to assign a value to a variable it is advised to use `<-` rather than `=`. The latter is generally used for setting parameters inside functions, eg, `my_string <- stringr::str_match(string = "abc", pattern = "a")`. More on assignment operators [here](https://stat.ethz.ch/R-manual/R-patched/library/base/html/assignOps.html).

## Arithmetic operators

- addition
```{r}
1 + 2
```
 - subtraction
```{r}
5 - 4
```
- multiplication
```{r}
2 * 2
```
- division
```{r}
3 / 2
```
- exponent
```{r}
3 ^ 2
```
- modulus (remainder on divsion)
```{r}
14 %% 6 
```
- integer division
```{r}
50 %/% 8
```


## Relational operators

- less than
```{r}
3.14 < 3.142
```

- greater than
```{r}
3.14159 > 3
```

- less than or equal to
```{r}
3 <= 3.14
3.14 <= 3.14
```

- greater than or equal to
```{r}
3 >= 3.14
3.14 >= 3.14
```

- equal to
```{r}
3 == 3.14159
```

- not equal to
```{r}
3 != 3.14159
```


## Logical operators

- not `!` 
```{r}
x <- c(TRUE, 0, FALSE, -4)
!x
```

- element-wise and `&`
```{r}
y <- c(3.14, FALSE, TRUE, 0)
x & y
```

- first element and `&&`
```{r}
x && y
```

- element-wise or `|`
```{r}
x | y
```

- first element or `||`
```{r}
z <- c(0, FALSE, 8)
y || z
```


## Vectors

### Types {#vector-types}

There are four main atomic vector types that you are likely to come across
when using R^[technically there are more, see 
https://adv-r.hadley.nz/vectors-chap.html#atomic-vectors]; **logical** (`TRUE` 
or `FALSE`), *double* (`3.142`), *integer* (`2L`) and *character* (`"Awesome"`)

```{r}
v1 <- TRUE
typeof(v1)
v1 <- FALSE
typeof(v1)

v2 <- 1.5
typeof(v2)
v2 <- 1
typeof(v2)

# integer values must be followed by an L to be stored as integers
v3 <- 2
typeof(v3)
v3 <- 2L
typeof(v3)

v4 <- "Awesome"
typeof(v4)
```

As well as the atomic vector types you will often encounter two other vector
types; **factor** and **Date**.  

Factor vectors are used to represent categorical data.  They are actually
integer vectors with two additional attributes, levels and class.  At this
stage it is not worth worrying to much about what attribute are just understand
that, for factors, the levels attribute gives the possible categories and 
combined with the integer values works much like a lookup table.  The `class` 
attribute is just "factor".


```{r}
ratings <- factor(c("good", "bad", "bad", "amazing"))
typeof(ratings)
attributes(ratings)
```

Date vectors are just double vectors with an additional class attribute set as
"Date".  

**Note - The following borrows directly from Hadley's Advanced R site
so we need to attribute appropriately and use correct licence**

```{r}
today <- Sys.Date()
typeof(today)
attributes(today)
```

The value of the double (which can be seen by stripping the class), represents
the number of days since "1970-01-01"^[This special date is known as the Unix 
Epoch]:

```{r}
date <- as.Date("1970-02-01")
unclass(date)
```

### Conversion between atomic vector types

Converting between the atomic vector types is done using the `as.character`, 
`as.integer`, `as.logical` and `as.double` functions.

```{r}
value <- 1.5
as.integer(value)
as.character(value)
as.logical(value)
```

Where it is not possible to convert a value you will get a warning message

```{r}
value <- "z"
as.integer(value)
```

When combining different vector types, coercion will obey the following 
hierarchy: character, double, integer, logical.

```{r}
typeof(c(9.9, 3L, "pop", TRUE))
typeof(c(9.9, 3L, TRUE))
typeof(c(3L, TRUE))
typeof(TRUE)
```
